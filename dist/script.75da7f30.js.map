<<<<<<< HEAD
{"version":3,"sources":["script.js","../../../../.config/yarn/global/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["stripe","customer","price","card","priceInfo","basic","amount","name","interval","currency","premium","stripeElements","publishableKey","Stripe","document","getElementById","elements","style","base","fontSize","color","fontFamily","fontSmoothing","create","mount","on","el","classList","add","remove","event","displayError","signupForm","addEventListener","evt","preventDefault","changeLoadingState","createCustomer","then","result","window","location","href","id","paymentForm","changeLoadingStatePrices","latestInvoicePaymentIntentStatus","localStorage","getItem","invoiceId","isPaymentRetry","createPaymentMethod","error","textContent","message","params","URLSearchParams","search","substring","customerId","get","billingName","querySelector","value","priceId","innerHTML","toUpperCase","type","billing_details","retryInvoiceWithNewPaymentMethod","paymentMethodId","paymentMethod","createSubscription","goToPaymentPage","innerText","getFormattedAmount","changePriceSelection","changePrice","demoChangePrice","switchPrices","newPriceIdSelected","currentSubscribedpriceId","subscriptionId","retrieveUpcomingInvoice","upcomingInvoice","capitalizeFirstLetter","amount_due","nextPaymentAttemptDateToDisplay","getDateStringFromUnixTimestamp","next_payment_attempt","confirmPriceChange","newPriceId","updateSubscription","searchParams","set","toString","billingEmail","fetch","method","headers","body","JSON","stringify","email","response","json","handleCustomerActionRequired","subscription","invoice","isRetry","status","paymentIntent","payment_intent","latest_invoice","confirmCardPayment","client_secret","payment_method","handlePaymentMethodRequired","setItem","onSubscriptionComplete","console","log","clearCache","onSubscriptionSampleDemoComplete","catch","cancelSubscription","cancelSubscriptionResponse","subscriptionCancelled","retrieveCustomerPaymentMethod","getConfig","numberFormat","Intl","NumberFormat","currencyDisplay","parts","formatToParts","zeroDecimalCurrency","part","formattedAmount","format","string","tempString","toLowerCase","charAt","slice","date","nextPaymentAttemptDate","Date","day","getDate","month","getMonth","year","getFullYear","getCustomersPaymentMethod","brand","last4","currentPeriodEnd","current_period_end","querySelectorAll","i","length","childNodes","disabled","isLoading","clear","resetDemo","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","parse","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","stack","overlay","createErrorOverlay","appendChild","createElement","stackTrace","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"script.75da7f30.js","sourceRoot":"../stripe/client","sourcesContent":["/* import './css/global.css';\nimport './css/index.css';\nimport './css/normalize.css'; */\n\nlet stripe, customer, price, card;\n\nlet priceInfo = {\n  basic: {\n    amount: '500',\n    name: 'Basic',\n    interval: 'monthly',\n    currency: 'USD',\n  },\n  premium: {\n    amount: '1500',\n    name: 'Premium',\n    interval: 'monthly',\n    currency: 'USD',\n  },\n};\n\nfunction stripeElements(publishableKey) {\n  stripe = Stripe(publishableKey);\n\n  if (document.getElementById('card-element')) {\n    let elements = stripe.elements();\n\n    // Card Element styles\n    let style = {\n      base: {\n        fontSize: '16px',\n        color: '#32325d',\n        fontFamily:\n          '-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif',\n        fontSmoothing: 'antialiased',\n        '::placeholder': {\n          color: '#a0aec0',\n        },\n      },\n    };\n\n    card = elements.create('card', { style: style });\n\n    card.mount('#card-element');\n\n    card.on('focus', function () {\n      let el = document.getElementById('card-element-errors');\n      el.classList.add('focused');\n    });\n\n    card.on('blur', function () {\n      let el = document.getElementById('card-element-errors');\n      el.classList.remove('focused');\n    });\n\n    card.on('change', function (event) {\n      displayError(event);\n    });\n  }\n\n  let signupForm = document.getElementById('signup-form');\n  if (signupForm) {\n    signupForm.addEventListener('submit', function (evt) {\n      evt.preventDefault();\n      changeLoadingState(true);\n      // Create customer\n      createCustomer().then((result) => {\n        customer = result.customer;\n\n        window.location.href = '/prices.html?customerId=' + customer.id;\n      });\n    });\n  }\n\n  let paymentForm = document.getElementById('payment-form');\n  if (paymentForm) {\n    paymentForm.addEventListener('submit', function (evt) {\n      evt.preventDefault();\n      changeLoadingStatePrices(true);\n\n      // If a previous payment was attempted, get the lastest invoice\n      const latestInvoicePaymentIntentStatus = localStorage.getItem(\n        'latestInvoicePaymentIntentStatus'\n      );\n\n      if (latestInvoicePaymentIntentStatus === 'requires_payment_method') {\n        const invoiceId = localStorage.getItem('latestInvoiceId');\n        const isPaymentRetry = true;\n        // create new payment method & retry payment on invoice with new payment method\n        createPaymentMethod({\n          card,\n          isPaymentRetry,\n          invoiceId,\n        });\n      } else {\n        // create new payment method & create subscription\n        createPaymentMethod({ card });\n      }\n    });\n  }\n}\n\nfunction displayError(event) {\n  changeLoadingStatePrices(false);\n  let displayError = document.getElementById('card-element-errors');\n  if (event.error) {\n    displayError.textContent = event.error.message;\n  } else {\n    displayError.textContent = '';\n  }\n}\n\nfunction createPaymentMethod({ card, isPaymentRetry, invoiceId }) {\n  const params = new URLSearchParams(document.location.search.substring(1));\n  const customerId = params.get('customerId');\n  // Set up payment method for recurring usage\n  let billingName = document.querySelector('#name').value;\n\n  let priceId = document.getElementById('priceId').innerHTML.toUpperCase();\n\n  stripe\n    .createPaymentMethod({\n      type: 'card',\n      card: card,\n      billing_details: {\n        name: billingName,\n      },\n    })\n    .then((result) => {\n      if (result.error) {\n        displayError(result);\n      } else {\n        if (isPaymentRetry) {\n          // Update the payment method and retry invoice payment\n          retryInvoiceWithNewPaymentMethod({\n            customerId: customerId,\n            paymentMethodId: result.paymentMethod.id,\n            invoiceId: invoiceId,\n            priceId: priceId,\n          });\n        } else {\n          // Create the subscription\n          createSubscription({\n            customerId: customerId,\n            paymentMethodId: result.paymentMethod.id,\n            priceId: priceId,\n          });\n        }\n      }\n    });\n}\n\nfunction goToPaymentPage(priceId) {\n  // Show the payment screen\n  document.querySelector('#payment-form').classList.remove('hidden');\n\n  document.getElementById('total-due-now').innerText = getFormattedAmount(\n    priceInfo[priceId].amount\n  );\n\n  // Add the price selected\n  document.getElementById('price-selected').innerHTML =\n    '→ Subscribing to ' +\n    '<span id=\"priceId\" class=\"font-bold\">' +\n    priceInfo[priceId].name +\n    '</span>';\n\n  // Show which price the user selected\n  if (priceId === 'premium') {\n    document.querySelector('#submit-premium-button-text').innerText =\n      'Selected';\n    document.querySelector('#submit-basic-button-text').innerText = 'Select';\n  } else {\n    document.querySelector('#submit-premium-button-text').innerText = 'Select';\n    document.querySelector('#submit-basic-button-text').innerText = 'Selected';\n  }\n\n  // Update the border to show which price is selected\n  changePriceSelection(priceId);\n}\n\nfunction changePrice() {\n  demoChangePrice();\n}\n\nfunction switchPrices(newPriceIdSelected) {\n  const params = new URLSearchParams(document.location.search.substring(1));\n  const currentSubscribedpriceId = params.get('priceId');\n  const customerId = params.get('customerId');\n  const subscriptionId = params.get('subscriptionId');\n  // Update the border to show which price is selected\n  changePriceSelection(newPriceIdSelected);\n\n  changeLoadingStatePrices(true);\n\n  // Retrieve the upcoming invoice to display details about\n  // the price change\n  retrieveUpcomingInvoice(customerId, subscriptionId, newPriceIdSelected).then(\n    (upcomingInvoice) => {\n      // Change the price details for price upgrade/downgrade\n      // calculate if it's upgrade or downgrade\n      document.getElementById(\n        'current-price-subscribed'\n      ).innerHTML = capitalizeFirstLetter(currentSubscribedpriceId);\n\n      document.getElementById(\n        'new-price-selected'\n      ).innerText = capitalizeFirstLetter(newPriceIdSelected);\n\n      document.getElementById('new-price-price-selected').innerText =\n        '$' + upcomingInvoice.amount_due / 100;\n\n      let nextPaymentAttemptDateToDisplay = getDateStringFromUnixTimestamp(\n        upcomingInvoice.next_payment_attempt\n      );\n      document.getElementById(\n        'new-price-start-date'\n      ).innerHTML = nextPaymentAttemptDateToDisplay;\n\n      changeLoadingStatePrices(false);\n    }\n  );\n\n  if (currentSubscribedpriceId != newPriceIdSelected) {\n    document.querySelector('#price-change-form').classList.remove('hidden');\n  } else {\n    document.querySelector('#price-change-form').classList.add('hidden');\n  }\n}\n\nfunction confirmPriceChange() {\n  const params = new URLSearchParams(document.location.search.substring(1));\n  const subscriptionId = params.get('subscriptionId');\n  let newPriceId = document.getElementById('new-price-selected').innerHTML;\n\n  updateSubscription(newPriceId.toUpperCase(), subscriptionId).then(\n    (result) => {\n      let searchParams = new URLSearchParams(window.location.search);\n      searchParams.set('priceId', newPriceId.toUpperCase());\n      searchParams.set('priceHasChanged', true);\n      window.location.search = searchParams.toString();\n    }\n  );\n}\n\nfunction createCustomer() {\n  let billingEmail = document.querySelector('#email').value;\n\n  return fetch('/create-customer', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      email: billingEmail,\n    }),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((result) => {\n      return result;\n    });\n}\n\nfunction handleCustomerActionRequired({\n  subscription,\n  invoice,\n  priceId,\n  paymentMethodId,\n  isRetry,\n}) {\n  if (subscription && subscription.status === 'active') {\n    // subscription is active, no customer actions required.\n    return { subscription, priceId, paymentMethodId };\n  }\n\n  // If it's a first payment attempt, the payment intent is on the subscription latest invoice.\n  // If it's a retry, the payment intent will be on the invoice itself.\n  let paymentIntent = invoice\n    ? invoice.payment_intent\n    : subscription.latest_invoice.payment_intent;\n\n  if (\n    paymentIntent.status === 'requires_action' ||\n    (isRetry === true && paymentIntent.status === 'requires_payment_method')\n  ) {\n    return stripe\n      .confirmCardPayment(paymentIntent.client_secret, {\n        payment_method: paymentMethodId,\n      })\n      .then((result) => {\n        if (result.error) {\n          // start code flow to handle updating the payment details\n          // Display error message in your UI.\n          // The card was declined (i.e. insufficient funds, card has expired, etc)\n          throw result;\n        } else {\n          if (result.paymentIntent.status === 'succeeded') {\n            // There's a risk of the customer closing the window before callback\n            // execution. To handle this case, set up a webhook endpoint and\n            // listen to invoice.payment_succeeded. This webhook endpoint\n            // returns an Invoice.\n            return {\n              priceId: priceId,\n              subscription: subscription,\n              invoice: invoice,\n              paymentMethodId: paymentMethodId,\n            };\n          }\n        }\n      });\n  } else {\n    // No customer action needed\n    return { subscription, priceId, paymentMethodId };\n  }\n}\n\nfunction handlePaymentMethodRequired({\n  subscription,\n  paymentMethodId,\n  priceId,\n}) {\n  if (subscription.status === 'active') {\n    // subscription is active, no customer actions required.\n    return { subscription, priceId, paymentMethodId };\n  } else if (\n    subscription.latest_invoice.payment_intent.status ===\n    'requires_payment_method'\n  ) {\n    // Using localStorage to store the state of the retry here\n    // (feel free to replace with what you prefer)\n    // Store the latest invoice ID and status\n    localStorage.setItem('latestInvoiceId', subscription.latest_invoice.id);\n    localStorage.setItem(\n      'latestInvoicePaymentIntentStatus',\n      subscription.latest_invoice.payment_intent.status\n    );\n    throw { error: { message: 'Your card was declined.' } };\n  } else {\n    return { subscription, priceId, paymentMethodId };\n  }\n}\n\nfunction onSubscriptionComplete(result) {\n  console.log(result);\n  // Payment was successful. Provision access to your service.\n  // Remove invoice from localstorage because payment is now complete.\n  clearCache();\n  // Change your UI to show a success message to your customer.\n  onSubscriptionSampleDemoComplete(result);\n  // Call your backend to grant access to your service based on\n  // the product your customer subscribed to.\n  // Get the product by using result.subscription.price.product\n}\n\nfunction createSubscription({ customerId, paymentMethodId, priceId }) {\n  return (\n    fetch('/create-subscription', {\n      method: 'post',\n      headers: {\n        'Content-type': 'application/json',\n      },\n      body: JSON.stringify({\n        customerId: customerId,\n        paymentMethodId: paymentMethodId,\n        priceId: priceId,\n      }),\n    })\n      .then((response) => {\n        return response.json();\n      })\n      // If the card is declined, display an error to the user.\n      .then((result) => {\n        if (result.error) {\n          // The card had an error when trying to attach it to a customer\n          throw result;\n        }\n        return result;\n      })\n      // Normalize the result to contain the object returned\n      // by Stripe. Add the addional details we need.\n      .then((result) => {\n        return {\n          // Use the Stripe 'object' property on the\n          // returned result to understand what object is returned.\n          subscription: result,\n          paymentMethodId: paymentMethodId,\n          priceId: priceId,\n        };\n      })\n      // Some payment methods require a customer to do additional\n      // authentication with their financial institution.\n      // Eg: 2FA for cards.\n      .then(handleCustomerActionRequired)\n      // If attaching this card to a Customer object succeeds,\n      // but attempts to charge the customer fail. You will\n      // get a requires_payment_method error.\n      .then(handlePaymentMethodRequired)\n      // No more actions required. Provision your service for the user.\n      .then(onSubscriptionComplete)\n      .catch((error) => {\n        // An error has happened. Display the failure to the user here.\n        // We utilize the HTML element we created.\n        displayError(error);\n      })\n  );\n}\n\nfunction retryInvoiceWithNewPaymentMethod({\n  customerId,\n  paymentMethodId,\n  invoiceId,\n  priceId,\n}) {\n  return (\n    fetch('/retry-invoice', {\n      method: 'post',\n      headers: {\n        'Content-type': 'application/json',\n      },\n      body: JSON.stringify({\n        customerId: customerId,\n        paymentMethodId: paymentMethodId,\n        invoiceId: invoiceId,\n      }),\n    })\n      .then((response) => {\n        return response.json();\n      })\n      // If the card is declined, display an error to the user.\n      .then((result) => {\n        if (result.error) {\n          // The card had an error when trying to attach it to a customer\n          throw result;\n        }\n        return result;\n      })\n      // Normalize the result to contain the object returned\n      // by Stripe. Add the addional details we need.\n      .then((result) => {\n        return {\n          // Use the Stripe 'object' property on the\n          // returned result to understand what object is returned.\n          invoice: result,\n          paymentMethodId: paymentMethodId,\n          priceId: priceId,\n          isRetry: true,\n        };\n      })\n      // Some payment methods require a customer to be on session\n      // to complete the payment process. Check the status of the\n      // payment intent to handle these actions.\n      .then(handleCustomerActionRequired)\n      // No more actions required. Provision your service for the user.\n      .then(onSubscriptionComplete)\n      .catch((error) => {\n        // An error has happened. Display the failure to the user here.\n        // We utilize the HTML element we created.\n        displayError(error);\n      })\n  );\n}\n\nfunction retrieveUpcomingInvoice(customerId, subscriptionId, newPriceId) {\n  return fetch('/retrieve-upcoming-invoice', {\n    method: 'post',\n    headers: {\n      'Content-type': 'application/json',\n    },\n    body: JSON.stringify({\n      customerId: customerId,\n      subscriptionId: subscriptionId,\n      newPriceId: newPriceId,\n    }),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((invoice) => {\n      return invoice;\n    });\n}\n\nfunction cancelSubscription() {\n  changeLoadingStatePrices(true);\n  const params = new URLSearchParams(document.location.search.substring(1));\n  const subscriptionId = params.get('subscriptionId');\n\n  return fetch('/cancel-subscription', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      subscriptionId: subscriptionId,\n    }),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((cancelSubscriptionResponse) => {\n      return subscriptionCancelled(cancelSubscriptionResponse);\n    });\n}\n\nfunction updateSubscription(priceId, subscriptionId) {\n  return fetch('/update-subscription', {\n    method: 'post',\n    headers: {\n      'Content-type': 'application/json',\n    },\n    body: JSON.stringify({\n      subscriptionId: subscriptionId,\n      newPriceId: priceId,\n    }),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((response) => {\n      return response;\n    });\n}\n\nfunction retrieveCustomerPaymentMethod(paymentMethodId) {\n  return fetch('/retrieve-customer-payment-method', {\n    method: 'post',\n    headers: {\n      'Content-type': 'application/json',\n    },\n    body: JSON.stringify({\n      paymentMethodId: paymentMethodId,\n    }),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((response) => {\n      return response;\n    });\n}\n\nfunction getConfig() {\n  return fetch('/config', {\n    method: 'get',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((response) => {\n      // Set up Stripe Elements\n      stripeElements(response.publishableKey);\n    });\n}\n\ngetConfig();\n\n/* ------ Sample helpers ------- */\n\nfunction getFormattedAmount(amount) {\n  // Format price details and detect zero decimal currencies\n  var amount = amount;\n  var numberFormat = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    currencyDisplay: 'symbol',\n  });\n  var parts = numberFormat.formatToParts(amount);\n  var zeroDecimalCurrency = true;\n  for (var part of parts) {\n    if (part.type === 'decimal') {\n      zeroDecimalCurrency = false;\n    }\n  }\n  amount = zeroDecimalCurrency ? amount : amount / 100;\n  var formattedAmount = numberFormat.format(amount);\n\n  return formattedAmount;\n}\n\nfunction capitalizeFirstLetter(string) {\n  let tempString = string.toLowerCase();\n  return tempString.charAt(0).toUpperCase() + tempString.slice(1);\n}\n\nfunction getDateStringFromUnixTimestamp(date) {\n  let nextPaymentAttemptDate = new Date(date * 1000);\n  let day = nextPaymentAttemptDate.getDate();\n  let month = nextPaymentAttemptDate.getMonth() + 1;\n  let year = nextPaymentAttemptDate.getFullYear();\n\n  return month + '/' + day + '/' + year;\n}\n\n// For demo purpose only\nfunction getCustomersPaymentMethod() {\n  let params = new URLSearchParams(document.location.search.substring(1));\n\n  let paymentMethodId = params.get('paymentMethodId');\n  if (paymentMethodId) {\n    retrieveCustomerPaymentMethod(paymentMethodId).then(function (response) {\n      document.getElementById('credit-card-last-four').innerText =\n        capitalizeFirstLetter(response.card.brand) +\n        ' •••• ' +\n        response.card.last4;\n\n      document.getElementById(\n        'subscribed-price'\n      ).innerText = capitalizeFirstLetter(params.get('priceId'));\n    });\n  }\n}\n\ngetCustomersPaymentMethod();\n\n// Shows the cancellation response\nfunction subscriptionCancelled() {\n  document.querySelector('#subscription-cancelled').classList.remove('hidden');\n  document.querySelector('#subscription-settings').classList.add('hidden');\n}\n\n/* Shows a success / error message when the payment is complete */\nfunction onSubscriptionSampleDemoComplete({\n  priceId: priceId,\n  subscription: subscription,\n  paymentMethodId: paymentMethodId,\n  invoice: invoice,\n}) {\n  let subscriptionId;\n  let currentPeriodEnd;\n  let customerId;\n  if (subscription) {\n    subscriptionId = subscription.id;\n    currentPeriodEnd = subscription.current_period_end;\n    if (typeof subscription.customer === 'object') {\n      customerId = subscription.customer.id;\n    } else {\n      customerId = subscription.customer;\n    }\n  } else {\n    const params = new URLSearchParams(document.location.search.substring(1));\n    subscriptionId = invoice.subscription;\n    currentPeriodEnd = params.get('currentPeriodEnd');\n    customerId = invoice.customer;\n  }\n\n  window.location.href =\n    '/account.html?subscriptionId=' +\n    subscriptionId +\n    '&priceId=' +\n    priceId +\n    '&currentPeriodEnd=' +\n    currentPeriodEnd +\n    '&customerId=' +\n    customerId +\n    '&paymentMethodId=' +\n    paymentMethodId;\n}\n\nfunction demoChangePrice() {\n  document.querySelector('#basic').classList.remove('border-pasha');\n  document.querySelector('#premium').classList.remove('border-pasha');\n  document.querySelector('#price-change-form').classList.add('hidden');\n\n  // Grab the priceId from the URL\n  // This is meant for the demo, replace with a cache or database.\n  const params = new URLSearchParams(document.location.search.substring(1));\n  const priceId = params.get('priceId').toLowerCase();\n\n  // Show the change price screen\n  document.querySelector('#prices-form').classList.remove('hidden');\n  document\n    .querySelector('#' + priceId.toLowerCase())\n    .classList.add('border-pasha');\n\n  let elements = document.querySelectorAll(\n    '#submit-' + priceId + '-button-text'\n  );\n  for (let i = 0; i < elements.length; i++) {\n    elements[0].childNodes[3].innerText = 'Current';\n  }\n  if (priceId === 'premium') {\n    document.getElementById('submit-premium').disabled = true;\n    document.getElementById('submit-basic').disabled = false;\n  } else {\n    document.getElementById('submit-premium').disabled = false;\n    document.getElementById('submit-basic').disabled = true;\n  }\n}\n\n// Changes the price selected\nfunction changePriceSelection(priceId) {\n  document.querySelector('#basic').classList.remove('border-pasha');\n  document.querySelector('#premium').classList.remove('border-pasha');\n  document\n    .querySelector('#' + priceId.toLowerCase())\n    .classList.add('border-pasha');\n}\n\n// Show a spinner on subscription submission\nfunction changeLoadingState(isLoading) {\n  if (isLoading) {\n    document.querySelector('#button-text').classList.add('hidden');\n    document.querySelector('#loading').classList.remove('hidden');\n    document.querySelector('#signup-form button').disabled = true;\n  } else {\n    document.querySelector('#button-text').classList.remove('hidden');\n    document.querySelector('#loading').classList.add('hidden');\n    document.querySelector('#signup-form button').disabled = false;\n  }\n}\n\n// Show a spinner on subscription submission\nfunction changeLoadingStatePrices(isLoading) {\n  console.log(isLoading);\n  if (isLoading) {\n    document.querySelector('#button-text').classList.add('hidden');\n    document.querySelector('#loading').classList.remove('hidden');\n\n    document.querySelector('#submit-basic').classList.add('invisible');\n    document.querySelector('#submit-premium').classList.add('invisible');\n    if (document.getElementById('confirm-price-change-cancel')) {\n      document\n        .getElementById('confirm-price-change-cancel')\n        .classList.add('invisible');\n    }\n  } else {\n    document.querySelector('#button-text').classList.remove('hidden');\n    document.querySelector('#loading').classList.add('hidden');\n\n    document.querySelector('#submit-basic').classList.remove('invisible');\n    document.querySelector('#submit-premium').classList.remove('invisible');\n    if (document.getElementById('confirm-price-change-cancel')) {\n      document\n        .getElementById('confirm-price-change-cancel')\n        .classList.remove('invisible');\n      document\n        .getElementById('confirm-price-change-submit')\n        .classList.remove('invisible');\n    }\n  }\n}\n\nfunction clearCache() {\n  localStorage.clear();\n}\n\nfunction resetDemo() {\n  clearCache();\n  window.location.href = '/';\n}\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}
=======
{"version":3,"sources":["script.js","../../../../.config/yarn/global/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["stripe","customer","price","card","priceInfo","basic","amount","name","interval","currency","premium","stripeElements","publishableKey","Stripe","document","getElementById","elements","style","base","fontSize","color","fontFamily","fontSmoothing","create","mount","on","el","classList","add","remove","event","displayError","signupForm","addEventListener","evt","preventDefault","changeLoadingState","createCustomer","then","result","window","location","href","id","paymentForm","changeLoadingStatePrices","latestInvoicePaymentIntentStatus","localStorage","getItem","invoiceId","isPaymentRetry","createPaymentMethod","error","textContent","message","params","URLSearchParams","search","substring","customerId","get","billingName","querySelector","value","priceId","innerHTML","toUpperCase","type","billing_details","retryInvoiceWithNewPaymentMethod","paymentMethodId","paymentMethod","createSubscription","goToPaymentPage","innerText","getFormattedAmount","changePriceSelection","changePrice","demoChangePrice","switchPrices","newPriceIdSelected","currentSubscribedpriceId","subscriptionId","retrieveUpcomingInvoice","upcomingInvoice","capitalizeFirstLetter","amount_due","nextPaymentAttemptDateToDisplay","getDateStringFromUnixTimestamp","next_payment_attempt","confirmPriceChange","newPriceId","updateSubscription","searchParams","set","toString","billingEmail","fetch","method","headers","body","JSON","stringify","email","response","json","handleCustomerActionRequired","subscription","invoice","isRetry","status","paymentIntent","payment_intent","latest_invoice","confirmCardPayment","client_secret","payment_method","handlePaymentMethodRequired","setItem","onSubscriptionComplete","console","log","clearCache","catch","cancelSubscription","cancelSubscriptionResponse","subscriptionCancelled","retrieveCustomerPaymentMethod","getConfig","numberFormat","Intl","NumberFormat","currencyDisplay","parts","formatToParts","zeroDecimalCurrency","part","formattedAmount","format","string","tempString","toLowerCase","charAt","slice","date","nextPaymentAttemptDate","Date","day","getDate","month","getMonth","year","getFullYear","getCustomersPaymentMethod","brand","last4","onSubscriptionSampleDemoComplete","currentPeriodEnd","current_period_end","querySelectorAll","i","length","childNodes","disabled","isLoading","clear","resetDemo","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","parse","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","stack","overlay","createErrorOverlay","appendChild","createElement","stackTrace","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"script.75da7f30.js","sourceRoot":"../stripe/client","sourcesContent":["let stripe, customer, price, card;\n\nlet priceInfo = {\n  basic: {\n    amount: '500',\n    name: 'Basic',\n    interval: 'monthly',\n    currency: 'USD',\n  },\n  premium: {\n    amount: '1500',\n    name: 'Premium',\n    interval: 'monthly',\n    currency: 'USD',\n  },\n};\n\nfunction stripeElements(publishableKey) {\n  stripe = Stripe(publishableKey);\n\n  if (document.getElementById('card-element')) {\n    let elements = stripe.elements();\n\n    // Card Element styles\n    let style = {\n      base: {\n        fontSize: '16px',\n        color: '#32325d',\n        fontFamily:\n          '-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif',\n        fontSmoothing: 'antialiased',\n        '::placeholder': {\n          color: '#a0aec0',\n        },\n      },\n    };\n\n    card = elements.create('card', { style: style });\n\n    card.mount('#card-element');\n\n    card.on('focus', function () {\n      let el = document.getElementById('card-element-errors');\n      el.classList.add('focused');\n    });\n\n    card.on('blur', function () {\n      let el = document.getElementById('card-element-errors');\n      el.classList.remove('focused');\n    });\n\n    card.on('change', function (event) {\n      displayError(event);\n    });\n  }\n\n  let signupForm = document.getElementById('signup-form');\n  if (signupForm) {\n    signupForm.addEventListener('submit', function (evt) {\n      evt.preventDefault();\n      changeLoadingState(true);\n      // Create customer\n      createCustomer().then((result) => {\n        customer = result.customer;\n\n        window.location.href = '/prices.html?customerId=' + customer.id;\n      });\n    });\n  }\n\n  let paymentForm = document.getElementById('payment-form');\n  if (paymentForm) {\n    paymentForm.addEventListener('submit', function (evt) {\n      evt.preventDefault();\n      changeLoadingStatePrices(true);\n\n      // If a previous payment was attempted, get the lastest invoice\n      const latestInvoicePaymentIntentStatus = localStorage.getItem(\n        'latestInvoicePaymentIntentStatus'\n      );\n\n      if (latestInvoicePaymentIntentStatus === 'requires_payment_method') {\n        const invoiceId = localStorage.getItem('latestInvoiceId');\n        const isPaymentRetry = true;\n        // create new payment method & retry payment on invoice with new payment method\n        createPaymentMethod({\n          card,\n          isPaymentRetry,\n          invoiceId,\n        });\n      } else {\n        // create new payment method & create subscription\n        createPaymentMethod({ card });\n      }\n    });\n  }\n}\n\nfunction displayError(event) {\n  changeLoadingStatePrices(false);\n  let displayError = document.getElementById('card-element-errors');\n  if (event.error) {\n    displayError.textContent = event.error.message;\n  } else {\n    displayError.textContent = '';\n  }\n}\n\nfunction createPaymentMethod({ card, isPaymentRetry, invoiceId }) {\n  const params = new URLSearchParams(document.location.search.substring(1));\n  const customerId = params.get('customerId');\n  // Set up payment method for recurring usage\n  let billingName = document.querySelector('#name').value;\n\n  let priceId = document.getElementById('priceId').innerHTML.toUpperCase();\n\n  stripe\n    .createPaymentMethod({\n      type: 'card',\n      card: card,\n      billing_details: {\n        name: billingName,\n      },\n    })\n    .then((result) => {\n      if (result.error) {\n        displayError(result);\n      } else {\n        if (isPaymentRetry) {\n          // Update the payment method and retry invoice payment\n          retryInvoiceWithNewPaymentMethod({\n            customerId: customerId,\n            paymentMethodId: result.paymentMethod.id,\n            invoiceId: invoiceId,\n            priceId: priceId,\n          });\n        } else {\n          // Create the subscription\n          createSubscription({\n            customerId: customerId,\n            paymentMethodId: result.paymentMethod.id,\n            priceId: priceId,\n          });\n        }\n      }\n    });\n}\n\nfunction goToPaymentPage(priceId) {\n  // Show the payment screen\n  document.querySelector('#payment-form').classList.remove('hidden');\n\n  document.getElementById('total-due-now').innerText = getFormattedAmount(\n    priceInfo[priceId].amount\n  );\n\n  // Add the price selected\n  document.getElementById('price-selected').innerHTML =\n    '→ Subscribing to ' +\n    '<span id=\"priceId\" class=\"font-bold\">' +\n    priceInfo[priceId].name +\n    '</span>';\n\n  // Show which price the user selected\n  if (priceId === 'premium') {\n    document.querySelector('#submit-premium-button-text').innerText =\n      'Selected';\n    document.querySelector('#submit-basic-button-text').innerText = 'Select';\n  } else {\n    document.querySelector('#submit-premium-button-text').innerText = 'Select';\n    document.querySelector('#submit-basic-button-text').innerText = 'Selected';\n  }\n\n  // Update the border to show which price is selected\n  changePriceSelection(priceId);\n}\n\nfunction changePrice() {\n  demoChangePrice();\n}\n\nfunction switchPrices(newPriceIdSelected) {\n  const params = new URLSearchParams(document.location.search.substring(1));\n  const currentSubscribedpriceId = params.get('priceId');\n  const customerId = params.get('customerId');\n  const subscriptionId = params.get('subscriptionId');\n  // Update the border to show which price is selected\n  changePriceSelection(newPriceIdSelected);\n\n  changeLoadingStatePrices(true);\n\n  // Retrieve the upcoming invoice to display details about\n  // the price change\n  retrieveUpcomingInvoice(customerId, subscriptionId, newPriceIdSelected).then(\n    (upcomingInvoice) => {\n      // Change the price details for price upgrade/downgrade\n      // calculate if it's upgrade or downgrade\n      document.getElementById(\n        'current-price-subscribed'\n      ).innerHTML = capitalizeFirstLetter(currentSubscribedpriceId);\n\n      document.getElementById(\n        'new-price-selected'\n      ).innerText = capitalizeFirstLetter(newPriceIdSelected);\n\n      document.getElementById('new-price-price-selected').innerText =\n        '$' + upcomingInvoice.amount_due / 100;\n\n      let nextPaymentAttemptDateToDisplay = getDateStringFromUnixTimestamp(\n        upcomingInvoice.next_payment_attempt\n      );\n      document.getElementById(\n        'new-price-start-date'\n      ).innerHTML = nextPaymentAttemptDateToDisplay;\n\n      changeLoadingStatePrices(false);\n    }\n  );\n\n  if (currentSubscribedpriceId != newPriceIdSelected) {\n    document.querySelector('#price-change-form').classList.remove('hidden');\n  } else {\n    document.querySelector('#price-change-form').classList.add('hidden');\n  }\n}\n\nfunction confirmPriceChange() {\n  const params = new URLSearchParams(document.location.search.substring(1));\n  const subscriptionId = params.get('subscriptionId');\n  let newPriceId = document.getElementById('new-price-selected').innerHTML;\n\n  updateSubscription(newPriceId.toUpperCase(), subscriptionId).then(\n    (result) => {\n      let searchParams = new URLSearchParams(window.location.search);\n      searchParams.set('priceId', newPriceId.toUpperCase());\n      searchParams.set('priceHasChanged', true);\n      window.location.search = searchParams.toString();\n    }\n  );\n}\n\nfunction createCustomer() {\n  let billingEmail = document.querySelector('#email').value;\n\n  return fetch('/create-customer', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      email: billingEmail,\n    }),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((result) => {\n      return result;\n    });\n}\n\nfunction handleCustomerActionRequired({\n  subscription,\n  invoice,\n  priceId,\n  paymentMethodId,\n  isRetry,\n}) {\n  if (subscription && subscription.status === 'active') {\n    // subscription is active, no customer actions required.\n    return { subscription, priceId, paymentMethodId };\n  }\n\n  // If it's a first payment attempt, the payment intent is on the subscription latest invoice.\n  // If it's a retry, the payment intent will be on the invoice itself.\n  let paymentIntent = invoice\n    ? invoice.payment_intent\n    : subscription.latest_invoice.payment_intent;\n\n  if (\n    paymentIntent.status === 'requires_action' ||\n    (isRetry === true && paymentIntent.status === 'requires_payment_method')\n  ) {\n    return stripe\n      .confirmCardPayment(paymentIntent.client_secret, {\n        payment_method: paymentMethodId,\n      })\n      .then((result) => {\n        if (result.error) {\n          // start code flow to handle updating the payment details\n          // Display error message in your UI.\n          // The card was declined (i.e. insufficient funds, card has expired, etc)\n          throw result;\n        } else {\n          if (result.paymentIntent.status === 'succeeded') {\n            // There's a risk of the customer closing the window before callback\n            // execution. To handle this case, set up a webhook endpoint and\n            // listen to invoice.payment_succeeded. This webhook endpoint\n            // returns an Invoice.\n            return {\n              priceId: priceId,\n              subscription: subscription,\n              invoice: invoice,\n              paymentMethodId: paymentMethodId,\n            };\n          }\n        }\n      });\n  } else {\n    // No customer action needed\n    return { subscription, priceId, paymentMethodId };\n  }\n}\n\nfunction handlePaymentMethodRequired({\n  subscription,\n  paymentMethodId,\n  priceId,\n}) {\n  if (subscription.status === 'active') {\n    // subscription is active, no customer actions required.\n    return { subscription, priceId, paymentMethodId };\n  } else if (\n    subscription.latest_invoice.payment_intent.status ===\n    'requires_payment_method'\n  ) {\n    // Using localStorage to store the state of the retry here\n    // (feel free to replace with what you prefer)\n    // Store the latest invoice ID and status\n    localStorage.setItem('latestInvoiceId', subscription.latest_invoice.id);\n    localStorage.setItem(\n      'latestInvoicePaymentIntentStatus',\n      subscription.latest_invoice.payment_intent.status\n    );\n    throw { error: { message: 'Your card was declined.' } };\n  } else {\n    return { subscription, priceId, paymentMethodId };\n  }\n}\n\nfunction onSubscriptionComplete(result) {\n  console.log(result);\n  // Payment was successful. Provision access to your service.\n  // Remove invoice from localstorage because payment is now complete.\n  clearCache();\n  // Change your UI to show a success message to your customer.\n  window.location.href = 'app.html';\n\n\n\n  //onSubscriptionSampleDemoComplete(result);\n\n\n\n  // Call your backend to grant access to your service based on\n  // the product your customer subscribed to.\n  // Get the product by using result.subscription.price.product\n}\n\nfunction createSubscription({ customerId, paymentMethodId, priceId }) {\n  return (\n    fetch('/create-subscription', {\n      method: 'post',\n      headers: {\n        'Content-type': 'application/json',\n      },\n      body: JSON.stringify({\n        customerId: customerId,\n        paymentMethodId: paymentMethodId,\n        priceId: priceId,\n      }),\n    })\n      .then((response) => {\n        return response.json();\n      })\n      // If the card is declined, display an error to the user.\n      .then((result) => {\n        if (result.error) {\n          // The card had an error when trying to attach it to a customer\n          throw result;\n        }\n        return result;\n      })\n      // Normalize the result to contain the object returned\n      // by Stripe. Add the addional details we need.\n      .then((result) => {\n        return {\n          // Use the Stripe 'object' property on the\n          // returned result to understand what object is returned.\n          subscription: result,\n          paymentMethodId: paymentMethodId,\n          priceId: priceId,\n        };\n      })\n      // Some payment methods require a customer to do additional\n      // authentication with their financial institution.\n      // Eg: 2FA for cards.\n      .then(handleCustomerActionRequired)\n      // If attaching this card to a Customer object succeeds,\n      // but attempts to charge the customer fail. You will\n      // get a requires_payment_method error.\n      .then(handlePaymentMethodRequired)\n      // No more actions required. Provision your service for the user.\n      .then(onSubscriptionComplete)\n      .catch((error) => {\n        // An error has happened. Display the failure to the user here.\n        // We utilize the HTML element we created.\n        displayError(error);\n      })\n  );\n}\n\nfunction retryInvoiceWithNewPaymentMethod({\n  customerId,\n  paymentMethodId,\n  invoiceId,\n  priceId,\n}) {\n  return (\n    fetch('/retry-invoice', {\n      method: 'post',\n      headers: {\n        'Content-type': 'application/json',\n      },\n      body: JSON.stringify({\n        customerId: customerId,\n        paymentMethodId: paymentMethodId,\n        invoiceId: invoiceId,\n      }),\n    })\n      .then((response) => {\n        return response.json();\n      })\n      // If the card is declined, display an error to the user.\n      .then((result) => {\n        if (result.error) {\n          // The card had an error when trying to attach it to a customer\n          throw result;\n        }\n        return result;\n      })\n      // Normalize the result to contain the object returned\n      // by Stripe. Add the addional details we need.\n      .then((result) => {\n        return {\n          // Use the Stripe 'object' property on the\n          // returned result to understand what object is returned.\n          invoice: result,\n          paymentMethodId: paymentMethodId,\n          priceId: priceId,\n          isRetry: true,\n        };\n      })\n      // Some payment methods require a customer to be on session\n      // to complete the payment process. Check the status of the\n      // payment intent to handle these actions.\n      .then(handleCustomerActionRequired)\n      // No more actions required. Provision your service for the user.\n      .then(onSubscriptionComplete)\n      .catch((error) => {\n        // An error has happened. Display the failure to the user here.\n        // We utilize the HTML element we created.\n        displayError(error);\n      })\n  );\n}\n\nfunction retrieveUpcomingInvoice(customerId, subscriptionId, newPriceId) {\n  return fetch('/retrieve-upcoming-invoice', {\n    method: 'post',\n    headers: {\n      'Content-type': 'application/json',\n    },\n    body: JSON.stringify({\n      customerId: customerId,\n      subscriptionId: subscriptionId,\n      newPriceId: newPriceId,\n    }),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((invoice) => {\n      return invoice;\n    });\n}\n\nfunction cancelSubscription() {\n  changeLoadingStatePrices(true);\n  const params = new URLSearchParams(document.location.search.substring(1));\n  const subscriptionId = params.get('subscriptionId');\n\n  return fetch('/cancel-subscription', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      subscriptionId: subscriptionId,\n    }),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((cancelSubscriptionResponse) => {\n      return subscriptionCancelled(cancelSubscriptionResponse);\n    });\n}\n\nfunction updateSubscription(priceId, subscriptionId) {\n  return fetch('/update-subscription', {\n    method: 'post',\n    headers: {\n      'Content-type': 'application/json',\n    },\n    body: JSON.stringify({\n      subscriptionId: subscriptionId,\n      newPriceId: priceId,\n    }),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((response) => {\n      return response;\n    });\n}\n\nfunction retrieveCustomerPaymentMethod(paymentMethodId) {\n  return fetch('/retrieve-customer-payment-method', {\n    method: 'post',\n    headers: {\n      'Content-type': 'application/json',\n    },\n    body: JSON.stringify({\n      paymentMethodId: paymentMethodId,\n    }),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((response) => {\n      return response;\n    });\n}\n\nfunction getConfig() {\n  return fetch('/config', {\n    method: 'get',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((response) => {\n      // Set up Stripe Elements\n      stripeElements(response.publishableKey);\n    });\n}\n\ngetConfig();\n\n/* ------ Sample helpers ------- */\n\nfunction getFormattedAmount(amount) {\n  // Format price details and detect zero decimal currencies\n  var amount = amount;\n  var numberFormat = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    currencyDisplay: 'symbol',\n  });\n  var parts = numberFormat.formatToParts(amount);\n  var zeroDecimalCurrency = true;\n  for (var part of parts) {\n    if (part.type === 'decimal') {\n      zeroDecimalCurrency = false;\n    }\n  }\n  amount = zeroDecimalCurrency ? amount : amount / 100;\n  var formattedAmount = numberFormat.format(amount);\n\n  return formattedAmount;\n}\n\nfunction capitalizeFirstLetter(string) {\n  let tempString = string.toLowerCase();\n  return tempString.charAt(0).toUpperCase() + tempString.slice(1);\n}\n\nfunction getDateStringFromUnixTimestamp(date) {\n  let nextPaymentAttemptDate = new Date(date * 1000);\n  let day = nextPaymentAttemptDate.getDate();\n  let month = nextPaymentAttemptDate.getMonth() + 1;\n  let year = nextPaymentAttemptDate.getFullYear();\n\n  return month + '/' + day + '/' + year;\n}\n\n// For demo purpose only\nfunction getCustomersPaymentMethod() {\n  let params = new URLSearchParams(document.location.search.substring(1));\n\n  let paymentMethodId = params.get('paymentMethodId');\n  if (paymentMethodId) {\n    retrieveCustomerPaymentMethod(paymentMethodId).then(function (response) {\n      document.getElementById('credit-card-last-four').innerText =\n        capitalizeFirstLetter(response.card.brand) +\n        ' •••• ' +\n        response.card.last4;\n\n      document.getElementById(\n        'subscribed-price'\n      ).innerText = capitalizeFirstLetter(params.get('priceId'));\n    });\n  }\n}\n\ngetCustomersPaymentMethod();\n\n// Shows the cancellation response\nfunction subscriptionCancelled() {\n  document.querySelector('#subscription-cancelled').classList.remove('hidden');\n  document.querySelector('#subscription-settings').classList.add('hidden');\n}\n\n/* Shows a success / error message when the payment is complete */\nfunction onSubscriptionSampleDemoComplete({\n  priceId: priceId,\n  subscription: subscription,\n  paymentMethodId: paymentMethodId,\n  invoice: invoice,\n}) {\n  let subscriptionId;\n  let currentPeriodEnd;\n  let customerId;\n  if (subscription) {\n    subscriptionId = subscription.id;\n    currentPeriodEnd = subscription.current_period_end;\n    if (typeof subscription.customer === 'object') {\n      customerId = subscription.customer.id;\n    } else {\n      customerId = subscription.customer;\n    }\n  } else {\n    const params = new URLSearchParams(document.location.search.substring(1));\n    subscriptionId = invoice.subscription;\n    currentPeriodEnd = params.get('currentPeriodEnd');\n    customerId = invoice.customer;\n  }\n\n  window.location.href =\n    '/account.html?subscriptionId=' +\n    subscriptionId +\n    '&priceId=' +\n    priceId +\n    '&currentPeriodEnd=' +\n    currentPeriodEnd +\n    '&customerId=' +\n    customerId +\n    '&paymentMethodId=' +\n    paymentMethodId;\n}\n\nfunction demoChangePrice() {\n  document.querySelector('#basic').classList.remove('border-pasha');\n  document.querySelector('#premium').classList.remove('border-pasha');\n  document.querySelector('#price-change-form').classList.add('hidden');\n\n  // Grab the priceId from the URL\n  // This is meant for the demo, replace with a cache or database.\n  const params = new URLSearchParams(document.location.search.substring(1));\n  const priceId = params.get('priceId').toLowerCase();\n\n  // Show the change price screen\n  document.querySelector('#prices-form').classList.remove('hidden');\n  document\n    .querySelector('#' + priceId.toLowerCase())\n    .classList.add('border-pasha');\n\n  let elements = document.querySelectorAll(\n    '#submit-' + priceId + '-button-text'\n  );\n  for (let i = 0; i < elements.length; i++) {\n    elements[0].childNodes[3].innerText = 'Current';\n  }\n  if (priceId === 'premium') {\n    document.getElementById('submit-premium').disabled = true;\n    document.getElementById('submit-basic').disabled = false;\n  } else {\n    document.getElementById('submit-premium').disabled = false;\n    document.getElementById('submit-basic').disabled = true;\n  }\n}\n\n// Changes the price selected\nfunction changePriceSelection(priceId) {\n  document.querySelector('#basic').classList.remove('border-pasha');\n  document.querySelector('#premium').classList.remove('border-pasha');\n  document\n    .querySelector('#' + priceId.toLowerCase())\n    .classList.add('border-pasha');\n}\n\n// Show a spinner on subscription submission\nfunction changeLoadingState(isLoading) {\n  if (isLoading) {\n    document.querySelector('#button-text').classList.add('hidden');\n    document.querySelector('#loading').classList.remove('hidden');\n    document.querySelector('#signup-form button').disabled = true;\n  } else {\n    document.querySelector('#button-text').classList.remove('hidden');\n    document.querySelector('#loading').classList.add('hidden');\n    document.querySelector('#signup-form button').disabled = false;\n  }\n}\n\n// Show a spinner on subscription submission\nfunction changeLoadingStatePrices(isLoading) {\n  console.log(isLoading);\n  if (isLoading) {\n    document.querySelector('#button-text').classList.add('hidden');\n    document.querySelector('#loading').classList.remove('hidden');\n\n    document.querySelector('#submit-basic').classList.add('invisible');\n    document.querySelector('#submit-premium').classList.add('invisible');\n    if (document.getElementById('confirm-price-change-cancel')) {\n      document\n        .getElementById('confirm-price-change-cancel')\n        .classList.add('invisible');\n    }\n  } else {\n    document.querySelector('#button-text').classList.remove('hidden');\n    document.querySelector('#loading').classList.add('hidden');\n\n    document.querySelector('#submit-basic').classList.remove('invisible');\n    document.querySelector('#submit-premium').classList.remove('invisible');\n    if (document.getElementById('confirm-price-change-cancel')) {\n      document\n        .getElementById('confirm-price-change-cancel')\n        .classList.remove('invisible');\n      document\n        .getElementById('confirm-price-change-submit')\n        .classList.remove('invisible');\n    }\n  }\n}\n\nfunction clearCache() {\n  localStorage.clear();\n}\n\nfunction resetDemo() {\n  clearCache();\n  window.location.href = '/';\n}","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}
>>>>>>> 34586936b30fc6df44bdfd58e297ea86011d05a7
